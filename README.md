The basis of this simple solution is the residuals() function that extracts the residuals of the regression (i.e. the portions of the variables not explained by the confounders). By using only the residuals for correlation atleast ensures that spurious relationships due to one or more of the confounders are not misinterpreted. However, if and given the residuals are large (quite often), one should bear in mind that the correlations may be explained by some other variable as well.  
